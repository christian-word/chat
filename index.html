<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JSON –¢–∞–±–ª–∏—á–Ω—ã–π –†–µ–¥–∞–∫—Ç–æ—Ä</title>
  <style>
    * { box-sizing: border-box; }
    body { 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
      margin: 0; 
      padding: 20px; 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    
    .container { 
      max-width: 1400px; 
      margin: 0 auto; 
    }
    
    .header {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    .header h1 {
      color: white;
      margin: 0 0 10px 0;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
    }
    
    .header p {
      color: rgba(255, 255, 255, 0.9);
      margin: 0;
    }
    
    .controls {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    
    .toolbar {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }
    
    .search-container {
      margin-bottom: 15px;
    }
    
    .search-input {
      width: 100%;
      padding: 12px 20px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.3s ease;
    }
    
    .search-input:focus {
      outline: none;
      border-color: #4CAF50;
    }
    
    .btn {
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    }
    
    .btn-primary { background: linear-gradient(45deg, #4CAF50, #45a049); color: white; }
    .btn-secondary { background: linear-gradient(45deg, #2196F3, #1976D2); color: white; }
    .btn-warning { background: linear-gradient(45deg, #FF9800, #F57C00); color: white; }
    .btn-danger { background: linear-gradient(45deg, #f44336, #d32f2f); color: white; }
    .btn-success { background: linear-gradient(45deg, #28a745, #218838); color: white; }
    
    .table-container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      overflow-x: auto;
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }
    
    th, td {
      padding: 12px;
      text-align: left;
      border-bottom: 1px solid #e0e0e0;
    }
    
    th {
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      font-weight: 600;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    
    tr:hover {
      background: #f8f9fa;
    }
    
    tr:nth-child(even) {
      background: #f8f9fa;
    }
    
    tr:nth-child(even):hover {
      background: #e9ecef;
    }
    
    .actions {
      display: flex;
      gap: 5px;
    }
    
    .btn-small {
      padding: 6px 12px;
      font-size: 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .btn-edit { background: #007bff; color: white; }
    .btn-delete { background: #dc3545; color: white; }
    .btn-edit:hover { background: #0056b3; }
    .btn-delete:hover { background: #c82333; }
    
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(3px);
    }
    
    .modal-content {
      background: white;
      margin: 5% auto;
      padding: 0;
      border-radius: 15px;
      width: 90%;
      max-width: 800px;
      max-height: 80vh;
      overflow: hidden;
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    }
    
    .modal-header {
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .modal-header h2 {
      margin: 0;
    }
    
    .close {
      color: white;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      transition: opacity 0.3s ease;
    }
    
    .close:hover {
      opacity: 0.7;
    }
    
    .modal-body {
      padding: 20px;
      max-height: 60vh;
      overflow-y: auto;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #333;
    }
    
    .form-group input, .form-group textarea, .form-group select {
      width: 100%;
      padding: 10px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.3s ease;
    }
    
    .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
      outline: none;
      border-color: #4CAF50;
    }
    
    .form-group textarea {
      resize: vertical;
      min-height: 100px;
      font-family: monospace;
    }
    
    .modal-footer {
      padding: 20px;
      background: #f8f9fa;
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }
    
    .status {
      margin-top: 15px;
      padding: 15px;
      border-radius: 8px;
      font-weight: 500;
      transition: all 0.3s ease;
    }
    
    .status.success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
    .status.error { background: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; }
    .status.loading { background: #d1ecf1; border: 1px solid #bee5eb; color: #0c5460; }
    
    .stats {
      display: flex;
      gap: 20px;
      margin-bottom: 15px;
      font-size: 14px;
      color: #666;
    }
    
    .stat-item {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .empty-state {
      text-align: center;
      padding: 40px;
      color: #666;
    }
    
    .empty-state h3 {
      margin: 0 0 10px 0;
      color: #333;
    }
    
    .file-input {
      display: none;
    }
    
    @media (max-width: 768px) {
      .toolbar { flex-direction: column; }
      .btn { width: 100%; justify-content: center; }
      .modal-content { width: 95%; margin: 2% auto; }
      .actions { flex-direction: column; }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üìä JSON –†–µ–¥–∞–∫—Ç–æ—Ä (–¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¶–µ—Ä–∫–≤–∞ "–î–æ–º –µ–≤–∞–Ω–≥–µ–ª–∏—è")</h1>
      <p>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ JSON –¥–∞–Ω–Ω—ã—Ö</p>
    </div>
    
    <div class="controls">
      <div class="toolbar">
        <button class="btn btn-secondary" onclick="loadFromCloud()">
          ‚òÅÔ∏è –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –æ–±–ª–∞–∫–∞
        </button>
        <button class="btn btn-primary" onclick="saveToCloud()">
          üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –æ–±–ª–∞–∫–æ
        </button>
        <button class="btn btn-secondary" onclick="downloadJSON()">
          üì• –°–∫–∞—á–∞—Ç—å JSON
        </button>
        <button class="btn btn-warning" onclick="document.getElementById('fileInput').click()">
          üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
        </button>
        <button class="btn btn-success" onclick="addNewRow()">
          ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å
        </button>
        <button class="btn btn-danger" onclick="clearTable()">
          üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É
        </button>
      </div>
      
      <div class="search-container">
        <input 
          type="text" 
          id="searchInput" 
          class="search-input" 
          placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ fullname, age, phone..." 
          oninput="filterTableByFields()"
        >
      </div>
      
      <div class="stats">
        <div class="stat-item">
          <span>üìä –ó–∞–ø–∏—Å–µ–π:</span>
          <span id="recordCount">0</span>
        </div>
        <div class="stat-item">
          <span>üìù –ü–æ–ª–µ–π:</span>
          <span id="fieldCount">0</span>
        </div>
        <div class="stat-item">
          <span>üíæ –†–∞–∑–º–µ—Ä:</span>
          <span id="sizeInfo">0 –±–∞–π—Ç</span>
        </div>
      </div>
      
      <div class="status" id="status">‚è≥ –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</div>
    </div>
    
    <div class="table-container">
      <table id="dataTable">
        <thead id="tableHead">
          <tr>
            <th>‚Ññ</th>
            <th>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody id="tableBody">
          <tr>
            <td colspan="3" class="empty-state">
              <h3>üìã –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</h3>
              <p>–ó–∞–≥—Ä—É–∑–∏—Ç–µ JSON —Ñ–∞–π–ª –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å</p>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
  <div id="editModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modalTitle">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏</h2>
        <span class="close" onclick="closeModal()">&times;</span>
      </div>
      <div class="modal-body">
        <form id="editForm">
          <!-- –§–æ—Ä–º–∞ –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" onclick="closeModal()">‚ùå –û—Ç–º–µ–Ω–∞</button>
        <button class="btn btn-primary" onclick="saveRow()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </div>
  </div>

  <input type="file" id="fileInput" class="file-input" accept=".json" onchange="loadFile(event)">

<script>
class JSONTableEditor {
  constructor() {
    this.API_KEY = "$2a$10$foT8lIkBZ.MYNt758MsuJuBvxxI750/hg4QyQXX.Q7b2vu/G0/irm";
    this.BIN_ID = "6873f48a5fdad557dbe10d30";
    this.data = [];
    this.currentEditIndex = -1;
    this.status = document.getElementById('status');
    this.unsavedChanges = false;
    this.initializeEditor();
  }

  initializeEditor() {
    this.loadFromLocal();
    window.onclick = (e) => {
      const modal = document.getElementById('editModal');
      if (e.target === modal) this.closeModal();
    };
    window.addEventListener("beforeunload", (e) => {
      if (this.unsavedChanges) {
        const message = "–£ –≤–∞—Å –µ—Å—Ç—å –Ω–µ—Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –æ–±–ª–∞–∫–æ –ø–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–æ–º?";
        e.preventDefault(); e.returnValue = message;
        return message;
      }
    });
  }

  setStatus(msg, type = 'loading') {
    this.status.textContent = msg;
    this.status.className = `status ${type}`;
  }

  updateStats() {
    const recordCount = this.data.length;
    const fieldCount = recordCount > 0 ? Object.keys(this.data[0]).length : 0;
    const sizeBytes = new Blob([JSON.stringify(this.data)]).size;
    document.getElementById('recordCount').textContent = recordCount;
    document.getElementById('fieldCount').textContent = fieldCount;
    document.getElementById('sizeInfo').textContent = this.formatBytes(sizeBytes);
  }

  formatBytes(bytes) {
    if (bytes === 0) return '0 –±–∞–π—Ç';
    const k = 1024;
    const sizes = ['–±–∞–π—Ç', '–ö–ë', '–ú–ë', '–ì–ë'];
    const i = Math.floor(Math.log(bytes) / Math.log(k));
    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
  }

  renderTable(filteredData = null) {
    const dataToRender = filteredData || this.data;
    const tableHead = document.getElementById('tableHead');
    const tableBody = document.getElementById('tableBody');

    if (dataToRender.length === 0) {
      tableHead.innerHTML = `
        <tr>
          <th>‚Ññ</th><th>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</th><th>–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>`;
      tableBody.innerHTML = `
        <tr>
          <td colspan="3" class="empty-state">
            <h3>üìã –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</h3>
            <p>–ó–∞–≥—Ä—É–∑–∏—Ç–µ JSON —Ñ–∞–π–ª –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å</p>
          </td>
        </tr>`;
      this.updateStats();
      return;
    }

    const allKeys = [...new Set(dataToRender.flatMap(obj => Object.keys(obj)))];
    if (!allKeys.includes("photo")) allKeys.push("photo");

    tableHead.innerHTML = `
      <tr>
        <th>‚Ññ</th>
        ${allKeys.map(k => `<th>${k}</th>`).join('')}
        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
      </tr>`;

    tableBody.innerHTML = dataToRender.map((item, index) => {
      const cells = allKeys.map(key => {
if (key === "photo") {
  const id = item.id;
  if (!id) return `<td><em style="color:#999;">–Ω–µ—Ç —Ñ–æ—Ç–æ</em></td>`;
  const url = `https://drive.google.com/uc?export=view&id=${id}`;
  return `<td><img src="${url}" style="width:40px;height:40px;border-radius:50%;object-fit:cover;"></td>`;
}
        const val = item[key];
        let display = '';
        if (val === null || val === undefined) display = '<em style="color:#999;">null</em>';
        else if (typeof val === 'object') display = `<code>${JSON.stringify(val)}</code>`;
        else if (typeof val === 'string' && val.length > 50) display = val.substring(0, 50) + '...';
        else display = String(val);

        if (key === "phone") {
          return `<td style="max-width:120px;overflow:hidden;text-overflow:ellipsis;">${display}</td>`;
        }

        return `<td>${display}</td>`;
      }).join('');

      return `
        <tr>
          <td><strong>${index + 1}</strong></td>
          ${cells}
          <td class="actions">
            <button class="btn-small btn-edit" onclick="editRow(${index})">‚úèÔ∏è</button>
            <button class="btn-small btn-delete" onclick="deleteRow(${index})">üóëÔ∏è</button>
          </td>
        </tr>`;
    }).join('');

    this.updateStats();
    this.autoSave();
  }

  filterDataByFields(query) {
    if (!query) return this.data;
    query = query.toLowerCase();
    return this.data.filter(obj => {
      const fullname = String(obj.fullname || '').toLowerCase();
      const age = String(obj.age || '').toLowerCase();
      const phone = String(obj.phone || '').toLowerCase();
      return fullname.includes(query) || age.includes(query) || phone.includes(query);
    });
  }

  editRow(index) {
    this.currentEditIndex = index;
    const item = this.data[index];
    document.getElementById('modalTitle').textContent = `‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ #${index + 1}`;
    const form = document.getElementById('editForm');
    form.innerHTML = Object.keys(item).map(key => {
      const val = item[key];
      let input = '';
      if (typeof val === 'object' && val !== null) input = `<textarea name="${key}">${JSON.stringify(val, null, 2)}</textarea>`;
      else if (typeof val === 'boolean') input = `<select name="${key}">
        <option value="true" ${val ? 'selected' : ''}>true</option>
        <option value="false" ${!val ? 'selected' : ''}>false</option>
      </select>`;
      else if (typeof val === 'number') input = `<input type="number" name="${key}" value="${val}" step="any">`;
      else input = `<input type="text" name="${key}" value="${val || ''}">`;
      return `<div class="form-group"><label>${key}:</label>${input}</div>`;
    }).join('');
    document.getElementById('editModal').style.display = 'block';
  }

  addNewRow() {
    const template = this.data.length > 0 ? { ...this.data[0] } : { fullname: '', age: '', phone: '', ID: '' };
    for (let k in template) {
      template[k] = typeof template[k] === 'boolean' ? false :
                    typeof template[k] === 'number' ? 0 :
                    typeof template[k] === 'object' ? null : '';
    }
    this.data.push(template);
    this.renderTable();
    this.editRow(this.data.length - 1);
  }

  deleteRow(index) {
    if (confirm(`–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å #${index + 1}?`)) {
      this.data.splice(index, 1);
      this.renderTable();
      this.setStatus('‚úÖ –ó–∞–ø–∏—Å—å —É–¥–∞–ª–µ–Ω–∞', 'success');
      this.unsavedChanges = true;
    }
  }

  saveRow() {
    const form = document.getElementById('editForm');
    const formData = new FormData(form);
    const updatedItem = {};
    for (let [k, v] of formData.entries()) {
      try {
        if (v.startsWith('{') || v.startsWith('[')) updatedItem[k] = JSON.parse(v);
        else if (v === 'true') updatedItem[k] = true;
        else if (v === 'false') updatedItem[k] = false;
        else if (!isNaN(v) && v !== '') updatedItem[k] = parseFloat(v);
        else updatedItem[k] = v;
      } catch {
        updatedItem[k] = v;
      }
    }
    this.data[this.currentEditIndex] = updatedItem;
    this.renderTable();
    this.closeModal();
    this.setStatus('‚úÖ –ó–∞–ø–∏—Å—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞', 'success');
    this.unsavedChanges = true;
  }

  closeModal() {
    document.getElementById('editModal').style.display = 'none';
    this.currentEditIndex = -1;
  }

  async loadFromCloud() {
    this.setStatus('üîÑ –ó–∞–≥—Ä—É–∂–∞—é –∏–∑ –æ–±–ª–∞–∫–∞...', 'loading');
    try {
      const r = await fetch(`https://api.jsonbin.io/v3/b/${this.BIN_ID}/latest`, {
        headers: { "X-Master-Key": this.API_KEY }
      });
      if (!r.ok) throw new Error(`HTTP ${r.status}`);
      const res = await r.json();
      this.data = Array.isArray(res.record) ? res.record : [res.record];
      this.renderTable();
      this.setStatus('‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑ –æ–±–ª–∞–∫–∞', 'success');
      this.unsavedChanges = false;
    } catch (e) {
      this.setStatus(`‚ùå –û—à–∏–±–∫–∞: ${e.message}`, 'error');
    }
  }

  async saveToCloud() {
    this.setStatus('üíæ –°–æ—Ö—Ä–∞–Ω—è—é –≤ –æ–±–ª–∞–∫–æ...', 'loading');
    try {
      const r = await fetch(`https://api.jsonbin.io/v3/b/${this.BIN_ID}`, {
        method: "PUT",
        headers: {
          "X-Master-Key": this.API_KEY,
          "Content-Type": "application/json"
        },
        body: JSON.stringify(this.data)
      });
      if (!r.ok) throw new Error(`HTTP ${r.status}`);
      this.setStatus('‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ –æ–±–ª–∞–∫–æ', 'success');
      this.unsavedChanges = false;
    } catch (e) {
      this.setStatus(`‚ùå –û—à–∏–±–∫–∞: ${e.message}`, 'error');
    }
  }

  downloadJSON() {
    const blob = new Blob([JSON.stringify(this.data, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `data-${new Date().toISOString().slice(0,19).replace(/:/g, '-')}.json`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    this.setStatus('‚úÖ –§–∞–π–ª —Å–∫–∞—á–∞–Ω', 'success');
  }

  loadFile(event) {
    const file = event.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = (e) => {
      try {
        const data = JSON.parse(e.target.result);
        this.data = Array.isArray(data) ? data : [data];
        this.renderTable();
        this.setStatus(`‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω —Ñ–∞–π–ª "${file.name}"`, 'success');
        this.unsavedChanges = true;
      } catch (e) {
        this.setStatus(`‚ùå –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è: ${e.message}`, 'error');
      }
    };
    reader.readAsText(file);
  }

  clearTable() {
    if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ?')) {
      this.data = [];
      this.renderTable();
      this.setStatus('‚úÖ –û—á–∏—â–µ–Ω–æ', 'success');
      this.unsavedChanges = true;
    }
  }

  autoSave() {
    localStorage.setItem('json_table_data', JSON.stringify(this.data));
  }

  loadFromLocal() {
    const saved = localStorage.getItem('json_table_data');
    if (saved) {
      try {
        this.data = JSON.parse(saved);
        this.renderTable();
        this.setStatus('‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è', 'success');
      } catch (e) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ localStorage:', e);
      }
    }
  }
}

let editor;
window.onload = () => { editor = new JSONTableEditor(); };
function loadFromCloud() { editor.loadFromCloud(); }
function saveToCloud() { editor.saveToCloud(); }
function downloadJSON() { editor.downloadJSON(); }
function loadFile(event) { editor.loadFile(event); }
function addNewRow() { editor.addNewRow(); }
function clearTable() { editor.clearTable(); }
function editRow(index) { editor.editRow(index); }
function deleteRow(index) { editor.deleteRow(index); }
function saveRow() { editor.saveRow(); }
function closeModal() { editor.closeModal(); }
function filterTableByFields() {
  const query = document.getElementById('searchInput').value.trim();
  const filtered = editor.filterDataByFields(query);
  editor.renderTable(filtered);
}
</script>


</body>
</html>
